import streamlit as st

menu_categories = {
    "ã‚±ã‚¢": [
        ("ãƒ—ãƒ¬ãƒ‘ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆåŸºæœ¬ã‚±ã‚¢ï¼‰", 15, 25),
        ("ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ã‚±ã‚¢", 20, 30),
        ("ãƒ‰ãƒ©ã‚¤ã‚±ã‚¢", 15, 25),
        ("ãƒãƒ³ãƒ‰ã‚¹ãƒ‘", 20, 30),
    ],
    "ãƒ‡ã‚¶ã‚¤ãƒ³": [
        ("ãƒ¯ãƒ³ã‚«ãƒ©ãƒ¼ï¼ˆ2è‰²ã¾ã§ï¼‰", 40, 60),
        ("ãƒ¯ãƒ³ã‚«ãƒ©ãƒ¼ï¼ˆ3è‰²ä»¥ä¸Šï¼‰", 50, 70),
        ("ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç¸¦ï¼‰", 50, 70),
        ("ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¨ªï¼‰", 50, 70),
        ("ãƒ©ãƒ¡ã‚°ãƒ©", 40, 60),
        ("ãƒã‚°ãƒãƒƒãƒˆãƒã‚¤ãƒ«ï¼ˆã‚¢ãƒ¼ãƒˆãªã—ï¼‰", 45, 65),
        ("ãƒã‚°ãƒãƒƒãƒˆãƒã‚¤ãƒ«ï¼ˆã‚¢ãƒ¼ãƒˆè¾¼ã¿ï¼‰", 55, 75),
        ("ãƒ•ãƒ¬ãƒ³ãƒãƒã‚¤ãƒ«ï¼ˆã‚¯ãƒªã‚¢ãƒ™ãƒ¼ã‚¹ï¼‰", 60, 90),
        ("å¤‰å½¢ãƒ•ãƒ¬ãƒ³ãƒ", 65, 95),
        ("ãƒŸãƒ©ãƒ¼ãƒã‚¤ãƒ«", 45, 65),
        ("ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ï¼ˆã‚¢ãƒ¼ãƒˆ2æœ¬ï¼‰", 60, 90),
        ("ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ï¼ˆã‚¢ãƒ¼ãƒˆ4ã€œ6æœ¬ï¼‰", 75, 105),
        ("æ‰‹æãã‚¢ãƒ¼ãƒˆï¼ˆ1æœ¬ï¼‰", 15, 25),
        ("æ°´å½©ã‚¢ãƒ¼ãƒˆãƒ»ã‚¤ãƒ³ã‚¯ã‚¢ãƒ¼ãƒˆ", 30, 45),
        ("ãƒ‘ãƒ¼ãƒ„ã‚¢ãƒ¼ãƒˆï¼ˆ3Dï¼‰", 20, 30),
        ("ãƒ•ã‚£ãƒ«ãƒ ï¼ãƒ›ã‚¤ãƒ«ã‚¢ãƒ¼ãƒˆ", 20, 30),
    ],
    "ã‚¹ã‚«ãƒ«ãƒ—ãƒ»è£œå¼·": [
        ("ã‚¸ã‚§ãƒ«ã‚¹ã‚«ãƒ«ãƒ—ï¼ˆ1æœ¬ï¼‰", 7, 10),
        ("ãƒ•ã‚©ãƒ¼ãƒ ã‚¹ã‚«ãƒ«ãƒ—ï¼ˆ1æœ¬ï¼‰", 10, 15),
        ("ãƒãƒƒãƒ—ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤", 60, 90),
        ("ãƒªãƒšã‚¢ï¼ˆäº€è£‚è£œå¼·ãƒ»1æœ¬ï¼‰", 10, 15),
        ("äº€è£‚è£œä¿®ï¼‹è£œå¼·ï¼ˆã‚»ãƒƒãƒˆï¼‰", 15, 20),
    ],
    "ã‚ªãƒ•": [
        ("å½“åº—ä»˜ã‘æ›¿ãˆã‚ªãƒ•", 20, 30),
        ("ä»–åº—ã‚ªãƒ•", 30, 45),
        ("ãƒãƒ¼ãƒ‰ã‚¸ã‚§ãƒ«ã‚ªãƒ•", 45, 60),
        ("ãƒãƒªãƒƒã‚·ãƒ¥ã‚ªãƒ•", 10, 15),
    ],
    "ãã®ä»–ã‚ªãƒ—ã‚·ãƒ§ãƒ³": [
        ("ãƒã‚¤ãƒ«ãƒãƒƒãƒ—ä½œæˆï¼ˆã‚ªãƒ¼ãƒ€ãƒ¼ï¼‰", 90, 120),
        ("ã‚«ãƒ©ãƒ¼è¿½åŠ ï¼ˆ1è‰²ã”ã¨ï¼‰", 5, 10),
        ("ãƒ‘ãƒ¼ãƒ„è¿½åŠ ï¼ˆå€‹æ•°ã”ã¨ï¼‰", 3, 5),
        ("ã‚³ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆè‰¶ã‚ã‚Šãƒ»ãƒãƒƒãƒˆï¼‰", 5, 10),
    ]
}

exclusive_groups = [
    {"ãƒ¯ãƒ³ã‚«ãƒ©ãƒ¼ï¼ˆ2è‰²ã¾ã§ï¼‰", "ãƒ¯ãƒ³ã‚«ãƒ©ãƒ¼ï¼ˆ3è‰²ä»¥ä¸Šï¼‰", "ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç¸¦ï¼‰", "ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ¨ªï¼‰", "ãƒ©ãƒ¡ã‚°ãƒ©", "ãƒã‚°ãƒãƒƒãƒˆãƒã‚¤ãƒ«ï¼ˆã‚¢ãƒ¼ãƒˆãªã—ï¼‰", "ãƒã‚°ãƒãƒƒãƒˆãƒã‚¤ãƒ«ï¼ˆã‚¢ãƒ¼ãƒˆè¾¼ã¿ï¼‰"},
    {"ãƒ•ãƒ¬ãƒ³ãƒãƒã‚¤ãƒ«ï¼ˆã‚¯ãƒªã‚¢ãƒ™ãƒ¼ã‚¹ï¼‰", "å¤‰å½¢ãƒ•ãƒ¬ãƒ³ãƒ"},
    {"å½“åº—ä»˜ã‘æ›¿ãˆã‚ªãƒ•", "ä»–åº—ã‚ªãƒ•", "ãƒãƒ¼ãƒ‰ã‚¸ã‚§ãƒ«ã‚ªãƒ•", "ãƒãƒªãƒƒã‚·ãƒ¥ã‚ªãƒ•"}
]

veteran_total = 0
target_total = 0

if "selected" not in st.session_state:
    st.session_state.selected = []

# åˆè¨ˆæ™‚é–“ã‚’ç”»é¢ä¸Šéƒ¨ã«å›ºå®šè¡¨ç¤º
st.markdown(
    f"""
    <div style='position:fixed; top:0; left:0; right:0; background-color:#f9f9f9; padding:10px; z-index:1000; border-bottom:1px solid #ddd;'>
        <strong>ğŸ§‘â€ğŸ« ãƒ™ãƒ†ãƒ©ãƒ³ï¼š{veteran_total}åˆ†ã€€ğŸ‘¶ æ–°äººï¼š{target_total}åˆ†</strong>
    </div>
    <br><br><br>
    """,
    unsafe_allow_html=True
)

st.title("ãƒã‚¤ãƒ«æ–½è¡“æ™‚é–“ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼")

for category, items in menu_categories.items():
    st.subheader(f"ã€{category}ã€‘")
    cols = st.columns(3)
    for idx, (name, vet, tgt) in enumerate(items):
        with cols[idx % 3]:
            is_checked = name in st.session_state.selected
            disabled = False
            for group in exclusive_groups:
                if name in group:
                    if any(other in st.session_state.selected and other != name for other in group):
                        disabled = True
                        break
            checked = st.checkbox(name, value=is_checked, key=name, disabled=disabled)
            if checked and name not in st.session_state.selected:
                st.session_state.selected.append(name)
            elif not checked and name in st.session_state.selected:
                st.session_state.selected.remove(name)

for category_items in menu_categories.values():
    for name, vet, tgt in category_items:
        if name in st.session_state.selected:
            veteran_total += vet
            target_total += tgt
